{"ast":null,"code":"import _classCallCheck from \"/Users/vadym/Documents/work/job/wedge/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/vadym/Documents/work/job/wedge/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/vadym/Documents/work/job/wedge/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/vadym/Documents/work/job/wedge/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/vadym/Documents/work/job/wedge/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/vadym/Documents/work/job/wedge/src/views/Objects/Objects.jsx\";\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport Modal from 'react-modal';\nimport { connect } from 'react-redux';\nimport AddButton from '../../components/AddButton/AddButton';\nimport Loader from '../../components/Loader/Loader';\nimport Table from '../../components/Table/Table';\nimport WedgeModal from '../../components/WedgeModal/WedgeModal';\nimport { OBJECT_TABLE_FIELDS, OBJECT_TYPES_CONFIG } from '../../enums';\nimport { createErrorMessageSelector, createLoadingSelector } from '../../store/utils/selectors';\nimport NewObjectType from '../Modals/NewObjectType';\nimport ObjectsTableItem from './components/ObjectsTableItem/ObjectsTableItem';\nimport SearchBar from './components/SearchBar/SearchBar';\nimport './objects.scss';\nimport { createObject as _createObject, fetchObjects as _fetchObjects, updateObject as _updateObject } from './scenario-actions';\nModal.setAppElement('#modal-root');\n\nfunction typeExists(type) {\n  return type && ['device', 'gateway', 'address'].includes(type);\n}\n\nvar Objects =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Objects, _Component);\n\n  function Objects() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Objects);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Objects)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      createModalOpened: false,\n      detailModalOpened: false,\n      editModalOpened: false,\n      currentType: '',\n      detailsOf: {}\n    };\n\n    _this.onEditClick = function () {\n      _this.openEditModal();\n    };\n\n    _this.openModal = function () {\n      _this.setState({\n        createModalOpened: true\n      });\n    };\n\n    _this.openDetailsModal = function (item) {\n      _this.setState({\n        detailsOf: item,\n        detailModalOpened: true\n      });\n    };\n\n    _this.closeDetailsModal = function () {\n      _this.setState({\n        detailModalOpened: false\n      });\n    };\n\n    _this.openEditModal = function (item) {\n      _this.setState({\n        detailsOf: item || _this.state.detailsOf,\n        keepDetailsOpened: _this.state.detailModalOpened,\n        detailModalOpened: false,\n        editModalOpened: true\n      });\n    };\n\n    _this.closeEditModal = function () {\n      _this.setState({\n        editModalOpened: false,\n        detailModalOpened: _this.state.keepDetailsOpened,\n        keepDetailsOpened: false\n      });\n    };\n\n    _this.closeCreateModal = function () {\n      _this.setState({\n        createModalOpened: false,\n        currentType: ''\n      });\n    };\n\n    _this.createTitleForCreateModal = function () {\n      if (typeExists(_this.state.currentType)) {\n        return OBJECT_TYPES_CONFIG.find(function (el) {\n          return el.name === _this.state.currentType;\n        }).title;\n      } else {\n        return 'Select new object type';\n      }\n    };\n\n    _this.renderDetailModal = function () {\n      if (typeExists(_this.state.detailsOf.element)) {\n        var Details = OBJECT_TYPES_CONFIG.find(function (el) {\n          return el.name === _this.state.detailsOf.element;\n        }).detailComponent;\n        return React.createElement(Details, {\n          data: _this.state.detailsOf,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        });\n      } else {\n        return null;\n      }\n    };\n\n    _this.renderEditModal = function () {\n      if (typeExists(_this.state.detailsOf.element)) {\n        var Survey = OBJECT_TYPES_CONFIG.find(function (el) {\n          return el.name === _this.state.detailsOf.element;\n        }).createComponent;\n        return React.createElement(Survey, {\n          onFinish: _this.onEdit,\n          item: _this.state.detailsOf,\n          edit: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        });\n      } else {\n        return null;\n      }\n    };\n\n    _this.renderCreationModal = function () {\n      if (typeExists(_this.state.currentType)) {\n        var Survey = OBJECT_TYPES_CONFIG.find(function (el) {\n          return el.name === _this.state.currentType;\n        }).createComponent;\n        return React.createElement(Survey, {\n          onFinish: _this.onAdd,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(NewObjectType, {\n          onTypeChoose: _this.onTypeChoose,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        });\n      }\n    };\n\n    _this.onAdd = function (entity) {\n      _this.props.createObject(entity, _this.state.currentType);\n\n      _this.closeCreateModal();\n    };\n\n    _this.onEdit = function (entity) {\n      _this.props.updateObject(entity);\n\n      _this.closeEditModal();\n    };\n\n    _this.onTypeChoose = function (type) {\n      _this.setState({\n        currentType: type\n      });\n    };\n\n    _this.renderObjects = function (matches) {\n      var items = _this.props.items;\n      return items.map(function (item) {\n        return React.createElement(ObjectsTableItem, {\n          key: \"objects-table-item-\".concat(item.id, \"-\").concat(item.name),\n          responsive: matches,\n          data: item,\n          onEdit: function onEdit() {\n            return _this.openEditModal(item);\n          },\n          onDetails: function onDetails() {\n            return _this.openDetailsModal(item);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Objects, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.fetchObjects();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"content objects\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: 'objects__search-bar',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(SearchBar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      })), React.createElement(AddButton, {\n        onClick: this.openModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"Add New Object\"), React.createElement(Table.Container, {\n        root: 'objects',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(Table.Content, {\n        root: 'objects',\n        headerComponent: React.createElement(Table.Header, {\n          items: OBJECT_TABLE_FIELDS,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }),\n        renderItems: this.renderObjects,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      })), this.props.isLoading && React.createElement(\"div\", {\n        className: 'loader-container',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(Loader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      })), React.createElement(WedgeModal, {\n        isOpen: this.state.createModalOpened,\n        onClose: this.closeCreateModal,\n        title: this.createTitleForCreateModal(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, this.renderCreationModal()), React.createElement(WedgeModal, {\n        isOpen: this.state.detailModalOpened,\n        onClose: this.closeDetailsModal,\n        additionalAction: {\n          icon: 'pe-7s-config',\n          callback: this.onEditClick\n        },\n        title: \"\".concat(this.state.detailsOf.name, \" - Details\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, this.renderDetailModal()), React.createElement(WedgeModal, {\n        isOpen: this.state.editModalOpened,\n        onClose: this.closeEditModal,\n        title: \"\".concat(this.state.detailsOf.name, \" - Edit\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, this.renderEditModal()));\n    }\n  }]);\n\n  return Objects;\n}(Component);\n\nObjects.propTypes = {\n  fetchObjects: PropTypes.func.isRequired,\n  createObject: PropTypes.func.isRequired,\n  updateObject: PropTypes.func.isRequired,\n  items: PropTypes.array.isRequired,\n  isLoading: PropTypes.bool.isRequired\n};\nObjects.defaultProps = {\n  items: []\n};\nvar loadingSelector = createLoadingSelector(['FETCHING_OBJECTS']);\nvar errorSelector = createErrorMessageSelector(['FETCHING_OBJECTS']);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    items: objectsSelector(state),\n    isLoading: loadingSelector(state),\n    error: errorSelector(state)\n  };\n};\n\nvar objectsSelector = function objectsSelector(state) {\n  var ecosystem = state.ecosystems.currentEcosystem;\n\n  if (ecosystem) {\n    return state.objects[ecosystem.uuid] ? state.objects[ecosystem.uuid].objects : [];\n  }\n\n  return [];\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    fetchObjects: function fetchObjects() {\n      return dispatch(_fetchObjects());\n    },\n    createObject: function createObject(entity, type) {\n      return dispatch(_createObject(entity, type));\n    },\n    updateObject: function updateObject(entity) {\n      return dispatch(_updateObject(entity));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Objects);","map":{"version":3,"sources":["/Users/vadym/Documents/work/job/wedge/src/views/Objects/Objects.jsx"],"names":["PropTypes","React","Component","Modal","connect","AddButton","Loader","Table","WedgeModal","OBJECT_TABLE_FIELDS","OBJECT_TYPES_CONFIG","createErrorMessageSelector","createLoadingSelector","NewObjectType","ObjectsTableItem","SearchBar","createObject","fetchObjects","updateObject","setAppElement","typeExists","type","includes","Objects","state","createModalOpened","detailModalOpened","editModalOpened","currentType","detailsOf","onEditClick","openEditModal","openModal","setState","openDetailsModal","item","closeDetailsModal","keepDetailsOpened","closeEditModal","closeCreateModal","createTitleForCreateModal","find","el","name","title","renderDetailModal","element","Details","detailComponent","renderEditModal","Survey","createComponent","onEdit","renderCreationModal","onAdd","onTypeChoose","entity","props","renderObjects","matches","items","map","id","isLoading","icon","callback","propTypes","func","isRequired","array","bool","defaultProps","loadingSelector","errorSelector","mapStateToProps","objectsSelector","error","ecosystem","ecosystems","currentEcosystem","objects","uuid","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types'\nimport React, { Component } from 'react'\nimport Modal from 'react-modal'\nimport { connect } from 'react-redux'\nimport AddButton from '../../components/AddButton/AddButton'\nimport Loader from '../../components/Loader/Loader'\nimport Table from '../../components/Table/Table'\nimport WedgeModal from '../../components/WedgeModal/WedgeModal'\nimport { OBJECT_TABLE_FIELDS, OBJECT_TYPES_CONFIG } from '../../enums'\nimport {\n\tcreateErrorMessageSelector,\n\tcreateLoadingSelector\n} from '../../store/utils/selectors'\nimport NewObjectType from '../Modals/NewObjectType'\nimport ObjectsTableItem from './components/ObjectsTableItem/ObjectsTableItem'\nimport SearchBar from './components/SearchBar/SearchBar'\nimport './objects.scss'\nimport { createObject, fetchObjects, updateObject } from './scenario-actions'\n\nModal.setAppElement('#modal-root')\n\nfunction typeExists(type) {\n\treturn type && ['device', 'gateway', 'address'].includes(type)\n}\n\nclass Objects extends Component {\n\tstate = {\n\t\tcreateModalOpened: false,\n\t\tdetailModalOpened: false,\n\t\teditModalOpened: false,\n\t\tcurrentType: '',\n\t\tdetailsOf: {}\n\t}\n\n\tonEditClick = () => {\n\t\tthis.openEditModal()\n\t}\n\n\topenModal = () => {\n\t\tthis.setState({ createModalOpened: true })\n\t}\n\n\topenDetailsModal = item => {\n\t\tthis.setState({\n\t\t\tdetailsOf: item,\n\t\t\tdetailModalOpened: true\n\t\t})\n\t}\n\n\tcloseDetailsModal = () => {\n\t\tthis.setState({\n\t\t\tdetailModalOpened: false\n\t\t})\n\t}\n\n\topenEditModal = item => {\n\t\tthis.setState({\n\t\t\tdetailsOf: item || this.state.detailsOf,\n\t\t\tkeepDetailsOpened: this.state.detailModalOpened,\n\t\t\tdetailModalOpened: false,\n\t\t\teditModalOpened: true\n\t\t})\n\t}\n\n\tcloseEditModal = () => {\n\t\tthis.setState({\n\t\t\teditModalOpened: false,\n\t\t\tdetailModalOpened: this.state.keepDetailsOpened,\n\t\t\tkeepDetailsOpened: false\n\t\t})\n\t}\n\n\tcloseCreateModal = () => {\n\t\tthis.setState({\n\t\t\tcreateModalOpened: false,\n\t\t\tcurrentType: ''\n\t\t})\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.fetchObjects()\n\t}\n\n\tcreateTitleForCreateModal = () => {\n\t\tif (typeExists(this.state.currentType)) {\n\t\t\treturn OBJECT_TYPES_CONFIG.find(el => el.name === this.state.currentType)\n\t\t\t\t.title\n\t\t} else {\n\t\t\treturn 'Select new object type'\n\t\t}\n\t}\n\n\trenderDetailModal = () => {\n\t\tif (typeExists(this.state.detailsOf.element)) {\n\t\t\tconst Details = OBJECT_TYPES_CONFIG.find(\n\t\t\t\tel => el.name === this.state.detailsOf.element\n\t\t\t).detailComponent\n\t\t\treturn <Details data={this.state.detailsOf} />\n\t\t} else {\n\t\t\treturn null\n\t\t}\n\t}\n\n\trenderEditModal = () => {\n\t\tif (typeExists(this.state.detailsOf.element)) {\n\t\t\tconst Survey = OBJECT_TYPES_CONFIG.find(\n\t\t\t\tel => el.name === this.state.detailsOf.element\n\t\t\t).createComponent\n\t\t\treturn <Survey onFinish={this.onEdit} item={this.state.detailsOf} edit />\n\t\t} else {\n\t\t\treturn null\n\t\t}\n\t}\n\n\trenderCreationModal = () => {\n\t\tif (typeExists(this.state.currentType)) {\n\t\t\tconst Survey = OBJECT_TYPES_CONFIG.find(\n\t\t\t\tel => el.name === this.state.currentType\n\t\t\t).createComponent\n\t\t\treturn <Survey onFinish={this.onAdd} />\n\t\t} else {\n\t\t\treturn <NewObjectType onTypeChoose={this.onTypeChoose} />\n\t\t}\n\t}\n\n\tonAdd = entity => {\n\t\tthis.props.createObject(entity, this.state.currentType)\n\t\tthis.closeCreateModal()\n\t}\n\n\tonEdit = entity => {\n\t\tthis.props.updateObject(entity)\n\t\tthis.closeEditModal()\n\t}\n\n\tonTypeChoose = type => {\n\t\tthis.setState({\n\t\t\tcurrentType: type\n\t\t})\n\t}\n\n\trenderObjects = matches => {\n\t\tconst { items } = this.props\n\t\treturn items.map(item => (\n\t\t\t<ObjectsTableItem\n\t\t\t\tkey={`objects-table-item-${item.id}-${item.name}`}\n\t\t\t\tresponsive={matches}\n\t\t\t\tdata={item}\n\t\t\t\tonEdit={() => this.openEditModal(item)}\n\t\t\t\tonDetails={() => this.openDetailsModal(item)}\n\t\t\t/>\n\t\t))\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"content objects\">\n\t\t\t\t<div className={'objects__search-bar'}>\n\t\t\t\t\t<SearchBar />\n\t\t\t\t</div>\n\t\t\t\t<AddButton onClick={this.openModal}>Add New Object</AddButton>\n\t\t\t\t<Table.Container root={'objects'}>\n\t\t\t\t\t<Table.Content\n\t\t\t\t\t\troot={'objects'}\n\t\t\t\t\t\theaderComponent={<Table.Header items={OBJECT_TABLE_FIELDS} />}\n\t\t\t\t\t\trenderItems={this.renderObjects}\n\t\t\t\t\t/>\n\t\t\t\t</Table.Container>\n\t\t\t\t{this.props.isLoading && (\n\t\t\t\t\t<div className={'loader-container'}>\n\t\t\t\t\t\t<Loader />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<WedgeModal\n\t\t\t\t\tisOpen={this.state.createModalOpened}\n\t\t\t\t\tonClose={this.closeCreateModal}\n\t\t\t\t\ttitle={this.createTitleForCreateModal()}\n\t\t\t\t>\n\t\t\t\t\t{this.renderCreationModal()}\n\t\t\t\t</WedgeModal>\n\t\t\t\t<WedgeModal\n\t\t\t\t\tisOpen={this.state.detailModalOpened}\n\t\t\t\t\tonClose={this.closeDetailsModal}\n\t\t\t\t\tadditionalAction={{\n\t\t\t\t\t\ticon: 'pe-7s-config',\n\t\t\t\t\t\tcallback: this.onEditClick\n\t\t\t\t\t}}\n\t\t\t\t\ttitle={`${this.state.detailsOf.name} - Details`}\n\t\t\t\t>\n\t\t\t\t\t{this.renderDetailModal()}\n\t\t\t\t</WedgeModal>\n\t\t\t\t<WedgeModal\n\t\t\t\t\tisOpen={this.state.editModalOpened}\n\t\t\t\t\tonClose={this.closeEditModal}\n\t\t\t\t\ttitle={`${this.state.detailsOf.name} - Edit`}\n\t\t\t\t>\n\t\t\t\t\t{this.renderEditModal()}\n\t\t\t\t</WedgeModal>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nObjects.propTypes = {\n\tfetchObjects: PropTypes.func.isRequired,\n\tcreateObject: PropTypes.func.isRequired,\n\tupdateObject: PropTypes.func.isRequired,\n\titems: PropTypes.array.isRequired,\n\tisLoading: PropTypes.bool.isRequired\n}\n\nObjects.defaultProps = {\n\titems: []\n}\n\nconst loadingSelector = createLoadingSelector(['FETCHING_OBJECTS'])\nconst errorSelector = createErrorMessageSelector(['FETCHING_OBJECTS'])\n\nconst mapStateToProps = state => {\n\treturn {\n\t\titems: objectsSelector(state),\n\t\tisLoading: loadingSelector(state),\n\t\terror: errorSelector(state)\n\t}\n}\n\nconst objectsSelector = state => {\n\tconst ecosystem = state.ecosystems.currentEcosystem\n\tif (ecosystem) {\n\t\treturn state.objects[ecosystem.uuid]\n\t\t\t? state.objects[ecosystem.uuid].objects\n\t\t\t: []\n\t}\n\n\treturn []\n}\n\nconst mapDispatchToProps = dispatch => {\n\treturn {\n\t\tfetchObjects: () => dispatch(fetchObjects()),\n\t\tcreateObject: (entity, type) => dispatch(createObject(entity, type)),\n\t\tupdateObject: entity => dispatch(updateObject(entity))\n\t}\n}\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(Objects)\n"]},"metadata":{},"sourceType":"module"}